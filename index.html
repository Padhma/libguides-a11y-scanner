<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='75' font-size='75'>ğŸ”</text></svg>">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LibGuides Accessibility Scanner</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Modern CSS Reset & Root Variables */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            /* UMich Blue & Gold */
            --color-primary-blue: #00274C;
            --color-secondary-gold: #FFCB05;
            --color-text-dark: #1F2937;
            --color-background: #F9FAFB; /* Light Gray for main body */
            --color-card-background: white;
            --color-border-light: #E5E7EB;
            --color-link-blue: #005A9C;
        }
        
        /* FIX: Ensures dark blue covers the overscroll area */
        html {
            background-color: var(--color-primary-blue); 
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            /* FIX: Set body to light background, removing the conflicting gradient */
            background-color: var(--color-background); 
            min-height: 100vh;
            color: var(--color-text-dark);
            line-height: 1.6;
            font-size: 15px;
        }
        
        a {
            color: var(--color-link-blue);
            text-decoration: none;
            transition: color 0.2s;
        }
        a:hover {
            color: var(--color-primary-blue);
        }

        /* Header (Dark Section) - COMPACTED */
        .header {
            /* Applying gradient ONLY to the header, not the body */
            background: linear-gradient(135deg, #00274c 0%, #004b87 100%);
            color: white;
            /* ğŸ‘‡ CHANGE: Reduce vertical padding from 50px to 30px */
            padding: 30px 20px; 
            text-align: center;
        }

        .header h1 {
            /* ğŸ‘‡ CHANGE: Reduce font size from 32px to 28px */
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px; /* Slightly reduced margin */
        }rgin-bottom: 10px;
        }

        .header p {
            font-size: 16px; 
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Main Content Container - RESTRUCTURED */
        .container {
            max-width: 800px;
            /* REMOVED negative margin for contained look */
            margin: 40px auto; 
            padding: 0 20px;
            position: relative;
        }

        /* Card Style - COMPACTED */
        .card {
            background: var(--color-card-background);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 25px;
        }

        .card h2 {
            color: var(--color-primary-blue);
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--color-border-light);
            padding-bottom: 8px;
        }

        /* Bookmarklet Section (Accent Box) */
        .bookmarklet-section {
            text-align: center;
            padding: 25px;
            background: #FFFBEB; 
            border-radius: 10px; 
            border: 2px solid var(--color-secondary-gold);
            margin: 20px 0;
        }

        .bookmarklet-section h3 {
            color: var(--color-primary-blue);
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: 600;
        }

        /* Bookmarklet Button - COMPACTED */
        .bookmarklet-button {
            display: inline-block;
            padding: 14px 25px;
            background: var(--color-secondary-gold);
            color: var(--color-primary-blue);
            text-decoration: none;
            font-size: 18px;
            font-weight: 700;
            border-radius: 6px;
            border: 2px solid var(--color-primary-blue);
            cursor: move;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .bookmarklet-button:hover {
            background-color: #FFD94D;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
        }

        /* Instructions - TIGHTENED */
        .instruction {
            margin-top: 15px;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid var(--color-primary-blue);
            background: #F8F9FA; /* Slightly differentiate from card background */
            /* FIX 1: Ensure text inside instruction box is left-aligned */
            text-align: left;
        }
        
        /* FIX 2: Add padding to the ordered list to make room for numbers */
        .instruction ol {
            padding-left: 20px;
        }


        .instruction strong {
            font-size: 16px;
            margin-bottom: 8px;
            /* Ensure the strong text takes full width */
            display: block; 
        }

        .instruction li {
            margin-bottom: 4px;
        }

        /* Step-by-step Guide - COMPACTED */
        .step {
            display: flex;
            align-items: center;
            background: #F0F4F8; 
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
            border-left: 3px solid var(--color-secondary-gold);
            font-size: 15px;
            font-weight: 600;
            /* Ensure text is aligned left inside the step */
            text-align: left; 
        }

        .step-number {
            width: 25px;
            height: 25px;
            background: var(--color-primary-blue);
            color: white;
            border-radius: 50%;
            font-weight: 700;
            margin-right: 10px;
            font-size: 14px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
        }

        /* Feature Grid - TIGHTENED */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Adjusted min size */
            gap: 20px;
            margin: 20px 0;
        }

        .feature {
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid var(--color-border-light);
            background: #fff; /* Explicitly white for contrast */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .feature h3 {
            font-size: 16px;
        }

        * Details (Troubleshooting) - Accordion Style */
        details {
            font-size: 15px;
            /* Use a slightly darker border for definition */
            border: 1px solid #D1D5DB; 
            margin-bottom: -1px; /* Crucial: Stack the items right against each other */
            background-color: white; 
            border-radius: 0; /* Remove individual item radius */
        }
        
        /* Set rounded corners ONLY on the top and bottom items */
        details:first-of-type {
            border-top-left-radius: 6px;
            border-top-right-radius: 6px;
        }

        details:last-of-type {
            border-bottom-left-radius: 6px;
            border-bottom-right-radius: 6px;
            margin-bottom: 10px; /* Reintroduce bottom margin for spacing after the whole group */
        }

        summary {
            padding: 12px 15px;
            font-weight: 600; 
            cursor: pointer;
            list-style: none; 
            position: relative;
            user-select: none;
            transition: background-color 0.2s; 
        }

        /* Hover state for professionalism */
        summary:hover {
            background-color: #F8F9FA; 
        }
        
        /* Custom arrow/caret styling using a CSS Triangle */
        summary::before {
            content: '';
            width: 0;
            height: 0;
            border-top: 5px solid transparent; 
            border-bottom: 5px solid transparent; 
            border-left: 5px solid var(--color-primary-blue); 
            margin-right: 10px;
            margin-left: 5px; 
            display: inline-block;
            transition: transform 0.2s ease; 
        }

        details[open] summary::before {
            transform: rotate(90deg); 
        }
        
        /* Style the open content area */
        details > div {
            padding: 15px;
            background-color: #F8F9FA; 
            border-top: 1px solid #D1DDEE; 
            line-height: 1.5;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 30px 20px;
            background-color: var(--color-primary-blue);
            color: white;
        }

        .footer a {
            color: var(--color-secondary-gold);
        }
    </style>
</head>
<body>

<div class="header">
    <h1>ğŸ” LibGuides Accessibility Scanner</h1>
    <p>Scan entire LibGuides for WCAG 2.1 AA compliance issues using an easy-to-install bookmarklet.</p>
</div>

<div class="container">
    
    <div class="card">
        <h2>ğŸš€ Try It Now!</h2>
        
        <div class="bookmarklet-section">
            <h3>ğŸ‘‡ Drag This Button to Your Bookmarks Bar</h3>
            <a href="javascript:(function(){var s=document.createElement('script');s.src='https://padhma.github.io/libguides-a11y-scanner/scanner.js?'+Date.now();document.head.appendChild(s);})();" 
                class="bookmarklet-button"
                onclick="alert('âš ï¸ Don\\'t click! DRAG this button to your bookmarks bar instead.'); return false;">
                ğŸ” LibGuides A11y Scanner
            </a>
            
            <div class="instruction">
                <strong>ğŸ“Œ Quick Install Instructions:</strong>
                <ol>
                    <li>Click and <b> DRAG </b> the button above to your browser's bookmarks bar.</li>
                    <li>If the bar isn't visible, press <code>Ctrl+Shift+B</code> (Windows) or <code>Cmd+Shift+B</code> (Mac).</li>
                    <li>That's it! The bookmarklet is ready to use.</li>
                </ol>
            </div>
        </div>

        <h3>ğŸ“ How to Use</h3>
        
        <div class="step">
            <span class="step-number">1</span>
            <strong>Navigate to any LibGuide</strong> (or use one of the test examples below).
        </div>

        <div class="step">
            <span class="step-number">2</span>
            <strong>Click the bookmarklet</strong> you just installed in your bookmarks bar.
        </div>

        <div class="step">
            <span class="step-number">3</span>
            <strong>Review the results</strong> - A sidebar will appear with an accessibility score and a list of issues.
        </div>

        <div class="step">
            <span class="step-number">4</span>
            <strong>Fix the issues</strong> - Follow the plain-language instructions provided for each violation.
        </div>

        <h3>ğŸ”— Test on Real LibGuides</h3>
        
        <div class="demo-links">
            <a href="https://guides.lib.umich.edu/" class="demo-link" target="_blank">UMich LibGuides Home | </a>
            <a href="https://guides.lib.umich.edu/diversity" class="demo-link" target="_blank">Diversity Guide | </a>
            <a href="https://guides.lib.umich.edu/c.php?g=282936" class="demo-link" target="_blank">Web of Science Guide</a>
        </div>
        <p style="text-align: center; margin-top: 15px; color: #6B7280; font-size: 13px;">
            Open any guide above, then click the bookmarklet to scan it!
        </p>
    </div>

    <div class="card">
        <h2>ğŸ§ What It Checks</h2>
        
        <div class="features">
            <div class="feature">
                <div class="feature-icon">ğŸ–¼ï¸</div>
                <h3>Images</h3>
                <p>Missing or generic alt text, decorative images without null alt, and quality issues.</p>
            </div>
            
            <div class="feature">
                <div class="feature-icon">ğŸ“Š</div>
                <h3>Headings</h3>
                <p>Proper hierarchical structure (H1, H2, H3) and no skipped levels.</p>
            </div>
            
            <div class="feature">
                <div class="feature-icon">ğŸ”—</div>
                <h3>Links</h3>
                <p>Descriptive link text, avoiding generic phrases like "click here" or raw URLs.</p>
            </div>
            
            <div class="feature">
                <div class="feature-icon">ğŸ¨</div>
                <h3>Contrast</h3>
                <p>Ensuring text is readable for low vision users (minimum 4.5:1 ratio).</p>
            </div>
            
            <div class="feature">
                <div class="feature-icon">ğŸ“</div>
                <h3>Forms</h3>
                <p>All input fields are properly labeled for screen reader users.</p>
            </div>
            
            <div class="feature">
                <div class="feature-icon">âœ…</div>
                <h3>WCAG 2.1 AA</h3>
                <p>Comprehensive checks against the current industry accessibility standard.</p>
            </div>
        </div>
    </div>

    <div class="card">
        <h2>âœ¨ Key Features</h2>
        
        <ul style="line-height: 2; font-size: 15px; list-style: disc inside; color: #374151;">
            <li><strong>ğŸ“Š Accessibility Score</strong> - Get an immediate visual rating of your page's quality.</li>
            <li><strong>ğŸ“– Plain Language</strong> - Issues are explained simply, with no technical jargon.</li>
            <li><strong>ğŸ”§ LibGuides-Specific Fixes</strong> - Exact, easy-to-follow instructions for fixing in the LibGuides CMS.</li>
            <li><strong>ğŸ‘ï¸ Visual Highlighting</strong> - Click "Show on Page" to instantly locate the problematic element.</li>
            <li><strong>âš¡ Fast Scanning</strong> - Results generated in seconds using the industry-leading `axe-core` engine.</li>
            <li><strong>ğŸ”’ Privacy First</strong> - All scanning happens **entirely in your browser**â€”no data is sent externally.</li>
            <li><strong>ğŸ’° Free & Open Source</strong> - Always free to use, no costs, and the code is fully transparent.</li>
        </ul>
    </div>

    <div class="card">
        <h2>ğŸ› ï¸ Troubleshooting & FAQ</h2>
        
        <details>
            <summary>I don't see my bookmarks bar</summary>
            <div>
                Press <code>Ctrl+Shift+B</code> (Windows) or <code>Cmd+Shift+B</code> (Mac) to toggle the bookmarks bar on/off in most major browsers.
            </div>
        </details>

        <details>
            <summary>Nothing happens when I click the bookmarklet</summary>
            <div>
                Ensure you are on a live LibGuides page (e.g., a guide's main page or box page). The scanner cannot run on blank tabs, browser settings, or some protected administrative pages.
            </div>
        </details>

        <details>
            <summary>How accurate is the scanner?</summary>
            <div>
                The scanner uses the <strong>axe-core</strong> engine (the industry standard used by Google and Microsoft) plus custom LibGuides-specific checks. It automatically catches approximately **60% of WCAG issues**. Remember that some issues (like complex logic or meaningful image descriptions) still require manual review by a human.
            </div>
        </details>
    </div>

    <div class="card">
        <h2>ğŸ’¡ About This Project</h2>
        <p style="margin-bottom: 15px;">
            This tool was initially built for the <strong>University of Michigan Library</strong> to empower LibGuides creators to ensure their content is accessible and inclusive for all users, including those relying on screen readers and other assistive technologies.
        </p>
        <p style="margin-bottom: 15px;">
            <strong>Technology:</strong> Built with vanilla JavaScript and the powerful <a href="https://github.com/dequelabs/axe-core" target="_blank">axe-core</a> accessibility testing engine.
        </p>
        <p>
            <strong>Open Source:</strong> View the source code and contribute on <a href="#">GitHub</a>.
        </p>
    </div>

</div>

<div class="footer">
    <p><strong>LibGuides Accessibility Scanner</strong></p>
    <p style="margin-top: 8px; opacity: 0.8; font-size: 14px;">
        Built for University of Michigan Library â€¢ Powered by axe-core
    </p>
    <p style="margin-top: 10px;">
        <a href="mailto:padhma@umich.edu">Contact the Developer</a>
    </p>
</div>

</body>
</html>
